# CampusLife - 校园生活交友平台

基于 HTML5 + CSS3 + JavaScript 实现的校园社交互动平台项目

## 技术实现

- **HTML5**：语义化标签，结构清晰
- **CSS3**：响应式布局，支持主题切换，毛玻璃 (Glassmorphism) 视觉风格
- **JavaScript (ES5)**：模块化设计，功能分离，localStorage 数据持久化

## 功能完成情况

本项目已完成所有"必做"及"可选"功能模块。

### 一、普通游客可浏览的首页 ✅

#### 必须功能（已完成）
- ✅ **平台首页**：包含 Logo、导航菜单、最新发布动态流
- ✅ **游客浏览**：游客可浏览注册用户设置为公开的动态（无法评论与互动）
- ✅ **视觉体验**：页面整体视觉风格统一，布局清晰，交互流畅

#### 可选功能（已完成）
- ✅ **动态推荐**：首页根据系统内数据变化动态更新推荐内容（热门话题榜、活跃用户推荐）
- ✅ **动效提示**：首页支持简洁动效提示新内容（顶部跑马灯公告、Hero 区域 Bento Grid 动画）

### 二、用户系统模块 ✅

#### 必须功能（已完成）
- ✅ **注册**：学生可使用学号进行自主注册，支持输入校验和异常提示
- ✅ **资料设置**：注册过程中可设置头像、昵称、兴趣标签等
- ✅ **登录流程**：完整支持"记住我"、"密码可见"、"忘记密码"交互
- ✅ **个人中心**：登录后可进入"个人主页"查看和编辑个人信息和历史动态
- ✅ **管理员**：系统管理员账号支持管理用户账号，包括"封禁用户"、"重置资料"等操作

#### 可选功能（已完成）
- ✅ **个性化展示**：用户资料页展示最近活跃时间、访问量、相册墙等内容

### 三、动态发布与浏览模块 ✅

#### 必须功能（已完成）
- ✅ **发布动态**：登录用户可在"发布页"编写并发布图文动态（图片支持 URL 或本地模拟上传）
- ✅ **互动操作**：所有动态展示在"首页"时间流中，支持点赞、评论、删除（仅本人）等操作
- ✅ **详情页**：动态详情页支持查看全文内容、点赞数、评论列表与时间戳，支持左右分栏布局

#### 可选功能（已完成）
- ✅ **话题标签**：支持为动态添加话题标签（如"#学习日常"）
- ✅ **可见范围**：支持设置可见范围（公开/仅好友）
- ✅ **编辑/撤回**：支持编辑已发布的动态内容
- ✅ **富评论区**：评论区支持使用动态表情、图片（支持缩略图预览）回复

### 四、互动与社交模块 ✅

#### 必须功能（已完成）
- ✅ **访问主页**：注册用户可访问他人主页，浏览其公开动态
- ✅ **关注机制**：支持"关注/取关"功能，主页展示粉丝/关注人数，主页展示"TA的动态"
- ✅ **视图切换**：首页可切换"关注动态"与"全站动态"两种视图模式

#### 可选功能（已完成）
- ✅ **私信功能**：支持"私信"界面展示（个人主页点击"私信"按钮）
- ✅ **转发功能**：支持转发动态，并引用原帖内容
- ✅ **收藏功能**：支持收藏动态，并在个人主页"我的收藏"中查看
- ✅ **主题与隐私**：支持主题切换（夜间模式）、设置隐私权限（动态仅自己可见等）

### 五、可选其他个性化模块 ✅

#### 已实现
- ✅ **智能推荐**：根据用户兴趣标签，为用户推荐可能喜欢的动态或用户（热门话题榜、活跃用户推荐）
- ✅ **全局搜索**：支持搜索功能（搜索动态内容和话题标签）
- ✅ **社团集市**：用户群组功能 (`groups.html`)
- ✅ **每日打卡**：打卡签到与热力图展示 (`checkin.html`)
- ✅ **年度回顾**：个人年度数据回顾页面 (`review.html`)

## 项目结构

```
web-final-project/
├── index.html          # 首页（动态流、发布入口、侧边栏推荐）
├── login.html          # 登录页
├── register.html       # 注册页
├── profile.html        # 个人中心（资料、动态、相册、收藏）
├── detail.html         # 动态详情页（全文、评论、图片轮播）
├── groups.html         # 社团集市（可选功能）
├── checkin.html        # 每日打卡（可选功能）
├── review.html         # 年度回顾（可选功能）
├── admin.html          # 管理员后台
├── css/                # 样式文件
│   ├── reset.css       # 样式重置
│   ├── variables.css   # CSS 变量
│   ├── components.css  # 组件样式
│   ├── layout.css      # 布局样式
│   └── components-extra.css # 补充样式
├── js/                 # JavaScript 文件
│   ├── data-store.js   # 数据存储层 (LocalStorage)
│   ├── auth.js         # 认证授权
│   ├── render.js       # 视图渲染
│   ├── main.js         # 主业务逻辑
│   ├── profile.js      # 个人中心逻辑
│   ├── admin.js        # 管理员逻辑
│   ├── groups.js       # 社团逻辑
│   ├── checkin.js      # 打卡逻辑
│   └── review.js       # 年度回顾逻辑
└── img/                # 图片资源
```

## 页面操作指南

### 1. 注册与登录
- **注册**：访问 `register.html`，输入学号（纯数字）、密码、昵称，第二步选择兴趣标签和头像完成注册。
- **登录**：访问 `login.html`，使用学号和密码登录。勾选"记住我"可保存登录状态。

### 2. 发布动态
- 在首页左侧导航栏点击"发布"按钮，或点击右上角的"+"号。
- 填写内容，可添加图片 URL、话题标签（#xxx），选择可见范围（公开/仅好友/发布到群组）。
- 点击发布即可。

### 3. 浏览与互动
- **首页**：切换"推荐"查看所有公开动态，切换"关注"仅看关注人的动态。
- **点赞/收藏**：点击卡片底部的爱心或星星图标。
- **评论**：点击评论图标进入详情页，底部输入框可发送文字、表情或图片。
- **转发**：点击转发图标，填写理由转发该动态。
- **编辑/删除**：对于自己的动态，点击右上角的"..."或直接点击编辑/删除图标进行操作。

### 4. 个人中心
- 点击导航栏头像进入。
- **我的动态**：查看发布历史。
- **我的相册**：瀑布流展示发布的图片。
- **编辑资料**：修改昵称、签名、头像。
- **退出登录**：点击"退出登录"按钮。

### 5. 管理员后台（重要）‼️

**如何进入：**
1. 如果当前已登录普通账号，请先点击头像选择**"退出登录"**。
2. 在登录页使用管理员账号登录：
   - **账号 (学号)**：`admin`
   - **密码**：`123456`
3. 登录成功后，点击右上角管理员头像，在下拉菜单中点击**"管理员后台"**进入。

**后台功能：**
- **用户管理**：查看所有注册用户，封禁/解封违规账号，重置用户头像。
- **动态审核**：查看平台所有动态，对违规内容进行"强制删除"（不可恢复）。

## 运行方式

1. 直接使用浏览器打开 `index.html` 即可运行。
2. 推荐使用 Chrome、Firefox、Edge 等现代浏览器。
3. 数据存储在浏览器的 LocalStorage 中，清除缓存会重置所有数据。

---

## 项目技术亮点

### 亮点一：Bento Grid 3D 滚动动效系统

首页 Hero 区域采用 **Bento Grid（网格布局）** 设计，通过 CSS Grid 和 JavaScript 滚动事件实现了流畅的 3D 动效体验。

**技术实现细节：**

1. **CSS Grid 布局**：使用 `grid-template-columns: repeat(6, 1fr)` 创建 6 列网格，每个卡片通过 `grid-column` 和 `grid-row` 实现不规则排列，形成错落有致的 Bento 风格。

2. **3D 变换基础**：为网格容器设置 `perspective: 1400px` 和 `transform: rotate3d(1, -0.5, 0, 8deg)`，让整个网格呈现轻微的 3D 倾斜效果。

3. **滚动驱动动画**：通过 `window.addEventListener('scroll')` 监听滚动事件，使用 `requestAnimationFrame` 进行性能优化。根据 `window.scrollY` 计算滚动进度，动态更新每个卡片的：
   - **位移**：通过 `data-offset-x` 和 `data-offset-y` 属性为每个卡片预设偏移方向，使用 `translate3d()` 实现扩散式位移
   - **缩放**：从 1.0 逐渐缩小至 0.94，增强层次感
   - **透明度**：从 1.0 淡出至 0，实现自然消失效果
   - **整体倾斜**：网格倾斜角度从 8deg 减小至 3deg，逐渐回归平面

4. **性能优化**：使用 `{ passive: true }` 提升滚动性能，通过 `ticking` 标志位避免重复计算，确保动画流畅。

**视觉效果**：当用户向下滚动时，Bento Grid 卡片会呈现"爆炸式"扩散效果，同时逐渐淡出，创造了极具视觉冲击力的首屏体验，体现了现代 Web 设计中的"滚动叙事"理念。

---

### 亮点二：视频背景日夜切换系统

项目采用**双视频背景**技术，实现了根据主题模式自动切换的沉浸式视觉体验。

**技术实现细节：**

1. **HTML 结构**：在 `<body>` 中同时放置两个 `<video>` 元素，分别标记为 `bg-video--day` 和 `bg-video--night`，设置为 `autoplay muted loop playsinline`，确保自动播放且无声音。

2. **CSS 层级控制**：
   - 视频设置为 `position: fixed`，覆盖整个视口（`z-index: -1`）
   - 使用 `object-fit: cover` 保持视频填满屏幕
   - 通过 `opacity` 属性控制显示/隐藏

3. **主题切换联动**：
   - 日间模式：`.bg-video--day { opacity: 1 }`，`.bg-video--night { opacity: 0 }`
   - 夜间模式：通过 `body[data-theme='dark']` 选择器切换：日间视频 `opacity: 0`，夜间视频 `opacity: 1`
   - 使用 `transition: opacity 0.8s ease` 实现平滑过渡

4. **视觉增强**：
   - 在视频上方叠加 `body::before` 伪元素，使用 `radial-gradient` 创建极光渐变效果，配合 `filter: blur(60px)` 实现柔和光晕
   - 通过 `@keyframes aurora-move` 让极光背景产生缓慢移动动画
   - 在首页使用 `body::after` 叠加网格纹理，增强层次感

**交互体验**：当用户点击主题切换按钮时，JavaScript 会切换 `body` 的 `data-theme` 属性，CSS 自动响应并平滑过渡视频显示，整个切换过程无缝衔接，创造出类似"日出日落"的沉浸式视觉体验。

---

### 亮点三：localStorage 数据持久化架构

项目完全基于浏览器 **localStorage API** 实现了完整的数据持久化系统，无需后端即可保存所有用户数据和应用状态。

**技术实现细节：**

1. **统一存储管理**：
   - 创建 `STORAGE_KEYS` 常量对象，统一管理所有存储键名（如 `campuslife_users`、`campuslife_posts_v2`、`campuslife_theme` 等）
   - 封装 `getItemJSON()` 和 `setItemJSON()` 方法，自动处理 `JSON.stringify/parse` 转换和异常捕获

2. **数据模型设计**：
   - **用户数据**：存储用户列表、当前登录用户 ID、记住的学号
   - **内容数据**：动态列表、评论列表、收藏列表、转发记录
   - **应用状态**：主题偏好、毛玻璃效果开关、卡片透明度设置
   - **扩展功能**：群组数据、打卡记录、用户访问统计

3. **数据操作 API**：
   - 提供完整的 CRUD 操作：`getUsers()`、`addUser()`、`updateUser()`、`deletePost()` 等
   - 实现业务逻辑封装：`toggleLike()`、`followUser()`、`addComment()` 等方法自动处理数据关联和状态更新
   - 使用 `generateId()` 生成唯一 ID（基于时间戳和随机数）

4. **数据迁移与兼容**：
   - 实现数据版本迁移逻辑，自动将旧格式数据升级到新格式
   - 通过 `initMockDataIfNeeded()` 检测首次访问，自动初始化示例数据

**架构优势**：
- **模块化设计**：所有数据操作集中在 `data-store.js`，其他模块通过统一接口访问，便于维护
- **类型安全**：通过 `safeParse()` 确保数据解析失败时返回默认值，避免程序崩溃
- **状态同步**：所有数据变更立即写入 localStorage，刷新页面后状态完全恢复

**应用场景**：实现了完整的用户注册、登录状态保持、动态发布、评论互动等功能，所有数据在浏览器中持久保存，展示了前端数据管理的最佳实践。

---

### 亮点四：CSS3 高级特性综合应用

项目充分利用 **CSS3 现代特性**，实现了毛玻璃效果（Glassmorphism）、CSS 变量主题系统、响应式布局等高级视觉效果。

**技术实现细节：**

1. **毛玻璃效果（Glassmorphism）**：
   - 使用 `backdrop-filter: blur(30px) saturate(180%)` 实现背景模糊和饱和度提升
   - 配合半透明背景 `rgba(255, 255, 255, 0.35)` 和边框 `rgba(255, 255, 255, 0.4)` 创造层次感
   - 通过 JavaScript 动态切换 `no-glass-effect` 类，支持用户自定义开关

2. **CSS 变量（Custom Properties）系统**：
   - 在 `:root` 中定义全局变量：颜色、字体、间距、圆角、阴影等
   - 夜间模式通过 `body[data-theme='dark']` 覆盖变量值，实现一键主题切换
   - 所有组件使用 `var(--color-primary)` 等变量，确保风格统一且易于维护

3. **响应式布局系统**：
   - **CSS Grid**：首页 Bento Grid、个人相册瀑布流使用 `grid-template-columns: repeat(auto-fill, minmax(150px, 1fr))` 自适应列数
   - **Flexbox**：导航栏、卡片内容、表单布局使用 Flexbox 实现灵活对齐
   - **媒体查询**：通过 `@media (max-width: 960px)` 和 `@media (max-width: 720px)` 实现移动端适配，隐藏侧边栏、调整字体大小、改变布局方向

4. **CSS 动画与过渡**：
   - 使用 `@keyframes` 实现跑马灯滚动、卡片淡入上浮、骨架屏加载等动画
   - 所有交互元素使用 `transition` 实现平滑过渡，提升用户体验
   - 结合 `transform` 和 `opacity` 实现高性能动画（利用 GPU 加速）

5. **高级选择器应用**：
   - 使用属性选择器 `[data-theme='dark']`、`[data-page='index']` 实现条件样式
   - 使用伪类选择器 `:hover`、`:focus`、`:active` 增强交互反馈
   - 使用伪元素 `::before`、`::after` 创建装饰效果和背景层

**视觉呈现**：
- 导航栏、卡片、侧边栏均采用毛玻璃效果，营造现代科技感
- 日间/夜间模式一键切换，所有颜色、阴影自动适配
- 完美适配桌面端、平板和手机，布局自动调整

**技术价值**：展示了 CSS3 作为现代 Web 标准的核心能力，通过纯 CSS 实现了传统需要大量 JavaScript 才能完成的视觉效果，体现了"渐进增强"的设计理念。
